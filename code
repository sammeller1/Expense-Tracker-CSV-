# expense_tracker.py

import csv
from datetime import datetime

FILENAME = "expenses.csv"

def log_expense(amount, category, note):
    with open(FILENAME, mode="a", newline="") as file:
        writer = csv.writer(file)
        writer.writerow([datetime.now().strftime("%Y-%m-%d %H:%M:%S"), amount, category, note])
    print("âœ… Expense logged successfully!")

def view_expenses():
    total = 0
    print("\nğŸ“„ Expense Records:")
    try:
        with open(FILENAME, mode="r") as file:
            reader = csv.reader(file)
            for row in reader:
                print(f"{row[0]} | ğŸ’¸ â‚¹{row[1]} | ğŸ—‚ {row[2]} | ğŸ“ {row[3]}")
                total += float(row[1])
        print(f"\nğŸ’° Total Spent: â‚¹{total}")
    except FileNotFoundError:
        print("âŒ No expenses logged yet.")

while True:
    print("\nğŸ“Š Expense Tracker Menu")
    print("1. Log new expense")
    print("2. View expenses")
    print("3. Exit")

    choice = input("Choose an option (1-3): ")

    if choice == '1':
        try:
            amount = float(input("Enter amount (â‚¹): "))
            category = input("Enter category (e.g., Food, Travel): ")
            note = input("Any note? (optional): ")
            log_expense(amount, category, note)
        except ValueError:
            print("âŒ Please enter a valid number for amount.")
    elif choice == '2':
        view_expenses()
    elif choice == '3':
        print("ğŸ‘‹ Exiting... Stay financially smart!")
        break
    else:
        print("âŒ Invalid choice. Please enter 1, 2, or 3.")
